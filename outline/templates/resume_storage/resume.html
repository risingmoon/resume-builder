{% extends 'outline/base.html' %}

{% block title %}Edit Resume{% endblock %}

{% block content %}
<form action="{% url 'resume_storage.views.resume_view' resume.pk %}" method="post">{% csrf_token %}
    <input type="text" name="title" value="{{ resume.title }}"><br>
    {% for field in form %}
        {% if field.data %}
            <input type="checkbox" name="{{ field.label }}" checked>{{ field.data }}<br>
        {% endif %}
    {% endfor %}
    {% for key, val in websites.iteritems %}
        <input type="checkbox" name="{{ key }}" checked>{{ val }}<br>
    {% endfor %}

    <h3>Resume Information</h3>

    {% for s_sect, ent_dict in saved.iteritems %}
        <input type="checkbox" name="sections" id="sect{{ s_sect.section.pk }}" value="{{ s_sect.section.title }}" checked>
        <label for="sect{{ s_sect.section.pk }}"><b>{{ s_sect.section.title }}</b></label><br>
        <a>{{ s_sect.section.description }}</a><br>
        {% for s_ent, dat_list in ent_dict.iteritems %}
            <a>&#160;&#160;&#160;&#160;</a>
            <input type="checkbox" name="entries" id="ent{{ s_ent.entry.pk }}" value="{{ s_ent.entry.title }}" checked>
            <label for="ent{{ s_ent.entry.pk }}"><a>{{ s_ent.entry.title }}</a></label><br>
            <a>&#160;&#160;&#160;&#160;{% if s_ent.entry.subtitle %}({{ s_ent.entry.subtitle}}){% endif %}</a><br>
            {% for dat in dat_list %}
                <a>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</a>
                <input type="checkbox" name="datas" id="data{{ dat.pk }}" value="{{ dat.text }}" checked>
                <label for="data{{ dat.pk }}"><a>{{ dat.text }}</a></label><br>
            {% endfor %}
        {% endfor %}
    {% endfor %}

    {% for sect in sections %}
        <input type="checkbox" name="sections" id="sect{{ sect.pk }}" value="{{ sect.title }}">
        <label for="sect{{ sect.pk }}"><b>{{ sect.title }}</b></label><br>
        <a>{{ sect.description }}</a><br>
        {% for ent in sect.entry_set.all %}
            <a>&#160;&#160;&#160;&#160;</a>
            <input type="checkbox" name="entries" id="ent{{ ent.pk }}" value="{{ ent.title }}">
            <label for="ent{{ ent.pk }}"><a>{{ ent.title }}</a></label><br>
            <a>&#160;&#160;&#160;&#160;{% if ent.subtitle %}({{ ent.subtitle}}){% endif %}</a><br>
            {% for dat in ent.data_set.all %}
                <a>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</a>
                <input type="checkbox" name="datas" id="data{{ dat.pk }}" value="{{ dat.text }}">
                <label for="data{{ dat.pk }}"><a>{{ dat.text }}</a></label><br>
            {% endfor %}
        {% endfor %}
    {% endfor %}
    <input type="submit" value="Save changes"/>
</form>

<a href="{% url 'resume_storage.views.delete_resume' resume.pk %}">Delete this resume</a>
{% endblock %}